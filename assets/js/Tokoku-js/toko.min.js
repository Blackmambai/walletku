document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("formPengaturanToko"),document.getElementById("formPengaturanStruk"),document.getElementById("formKeamanan"),document.getElementById("formPajakDiskon");const e=document.getElementById("btnSimpanPengaturan"),t=document.getElementById("logoToko"),o=document.getElementById("previewLogo");t.addEventListener("change",(e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{o.src=e.target.result,o.style.display="block"},e.readAsDataURL(t)}})),e.addEventListener("click",(()=>{if(!function(){const e=document.getElementById("namaToko").value.trim(),t=document.getElementById("passwordAdmin").value,o=document.getElementById("konfirmasiPassword").value;return""===e?(Swal.fire({title:"Error Validasi",text:"Nama Toko tidak boleh kosong",icon:"error",confirmButtonText:"OK"}),!1):!t||t===o||(Swal.fire({title:"Error Validasi",text:"Konfirmasi password tidak cocok",icon:"error",confirmButtonText:"OK"}),!1)}())return;const e={namaToko:document.getElementById("namaToko").value,emailToko:document.getElementById("emailToko").value,nomorWAToko:document.getElementById("nomorWAToko").value,npwpToko:document.getElementById("npwpToko").value,alamatToko:document.getElementById("alamatToko").value,deskripsiToko:document.getElementById("deskripsiToko").value,catatanKakiStruk:document.getElementById("catatanKakiStruk").value,metodeTunai:document.getElementById("metodeTunai").checked,metodeTransfer:document.getElementById("metodeTransfer").checked,metodeQRIS:document.getElementById("metodeQRIS").checked,metodeShopee:document.getElementById("metodeShopee").checked,logoToko:o.src||"",usernameAdmin:document.getElementById("usernameAdmin").value,passwordAdmin:document.getElementById("passwordAdmin").value||JSON.parse(localStorage.getItem("pengaturanToko")||"{}").passwordAdmin,persentasePajak:parseFloat(document.getElementById("persentasePajak").value),persentaseDiskon:parseFloat(document.getElementById("persentaseDiskon").value),aktifkanDiskon:document.getElementById("aktifkanDiskon").checked};localStorage.setItem("pengaturanToko",JSON.stringify(e)),Swal.fire({title:"Berhasil",text:"Pengaturan berhasil disimpan!",icon:"success",confirmButtonText:"OK"})})),function(){const e=JSON.parse(localStorage.getItem("pengaturanToko")||"{}");document.getElementById("namaToko").value=e.namaToko||"",document.getElementById("emailToko").value=e.emailToko||"",document.getElementById("nomorWAToko").value=e.nomorWAToko||"",document.getElementById("npwpToko").value=e.npwpToko||"",document.getElementById("alamatToko").value=e.alamatToko||"",document.getElementById("deskripsiToko").value=e.deskripsiToko||"",document.getElementById("catatanKakiStruk").value=e.catatanKakiStruk||"",document.getElementById("metodeTunai").checked=e.metodeTunai||!1,document.getElementById("metodeTransfer").checked=e.metodeTransfer||!1,document.getElementById("metodeQRIS").checked=e.metodeQRIS||!1,document.getElementById("metodeShopee").checked=e.metodeShopee||!1,e.logoToko&&(o.src=e.logoToko,o.style.display="block"),document.getElementById("usernameAdmin").value=e.usernameAdmin||"",document.getElementById("persentasePajak").value=e.persentasePajak||0,document.getElementById("persentaseDiskon").value=e.persentaseDiskon||0,document.getElementById("aktifkanDiskon").checked=e.aktifkanDiskon||!1}(),reader.readAsText(file)}));